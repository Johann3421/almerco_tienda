import{_ as z}from"./AppWebLayout-gtSRl0gO.js";import D from"./CartProductsMain-fiZ8HE6p.js";import{m as a,h as L,p as U,r as h,f as p,o as l,b as o,t as b,F as k,s as E,c as O,a as c,w as f}from"./app-Bt6ztAfV.js";import q from"./Cabecera-BZKB-Jw6.js";import G from"./NavMobil-CN-jJMiu.js";import"./Footer-DB5-MtFP.js";import"./References-07TxyabB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-Bism2vW4.js";import"./SettingStore-Dmkk0slu.js";import"./favicon-CdIV8-2k.js";import"./PapupCarrito-Bn9WbYt6.js";import"./CartMobil-DcDmtq4m.js";import"./PapupCant-B_d-Dv1P.js";import"./Promotion-BCU-_mBv.js";import"./Nav-BZ68Bjws.js";const H={class:"sm:mt-48 sm:ml-32 sm:mr-28"},K={class:"block p-4 font-bold text-xl"},Q={class:"relative sm:flex flex-row p-2"},T={class:"p-2 h-full"},X={class:"rounded border border-gray-300 bg-white"},Y={class:"flex cursor-pointer items-center justify-between gap-2 p-3 text-gray-900 transition"},Z={class:"text-sm font-medium"},ee={class:"border-gray-200 bg-white"},se={class:"space-y-1 border-t border-gray-200 p-2"},te={class:"space-y-1 border-gray-200 p-2"},oe={class:"inline-flex items-center gap-2"},re=["for"],ae=["id","onChange"],ne={class:"text-sm font-medium text-gray-700"},ie={class:"flex flex-wrap justify-center w-full"},le={class:"text-center mt-4"},ce={__name:"Index",props:{subgroup:Object,products:Object,images:Object,brands:Array},setup(B){const r=B,g=a([]),w=a([]),i=a([]),y=a([]),x=a(""),V=a(""),j=a([]),m=a([]),u=a([]),I=a([]);u.value=r.images,I.value=r.images;const C=a([]),_=a(1),A=()=>{u.value&&u.value.length>0&&i.value.forEach(e=>{const s=u.value.filter(t=>t.product_id===e.id);j.value.push({product_id:e.id,imagenes:s})})},N=()=>{r.brands&&r.brands.length>0&&r.brands.forEach(e=>{e.filter_items.forEach(s=>{s.products.forEach(t=>{C.value.push({product_id:t.id,imagen:{file_path:s.file_path,file:s.file}})})})})},S=e=>{const s=C.value.find(t=>t.product_id===e);return s?s.imagen:null},M=e=>{const s=j.value.find(t=>t.product_id===e);return s?s.imagenes:[]},R=async e=>{const s=m.value.findIndex(t=>t.id===e.id&&t.filter_id===e.filter.id);if(s===-1?m.value.push({id:e.id,filter_id:e.filter.id}):m.value.splice(s,1),m.value.length===0){i.value=y.value,u.value=I.value;return}try{const t=await axios.post("/filter-products",{filters:m.value,idtipo:r.subgroup.id,tipo:"subgroup"}),d=t.data.products,$=t.data.images;JSON.stringify(y.value)!==JSON.stringify(d)&&(i.value=d,u.value=$,_.value=1)}catch(t){console.error("Error al enviar la solicitud al controlador:",t)}},J=L(()=>{const s=F()*2,t=(_.value-1)*s,d=t+s;return i.value.slice(t,d)}),F=()=>{const e=window.innerWidth;return e>=7680?21:e>=3840?10:e>=2808?7:e>=2480?6:e>=2152?5:e>=1824?4:e>=1496?3:e>=1168?2:1};return U(()=>{r.products.forEach(e=>{e.filter_items&&Array.isArray(e.filter_items)&&e.filter_items.forEach(s=>{g.value.some(t=>t.id===s.id)||g.value.push(s)})}),g.value.forEach(e=>{w.value.some(s=>s.id===e.filter.id)||w.value.push(e.filter)}),i.value=r.subgroup.products,y.value=i.value,x.value=r.subgroup.name,V.value=x.value,A(),N()}),(e,s)=>{const t=h("v-pagination"),d=h("v-container"),$=h("v-col"),W=h("v-row");return l(),p("section",H,[o("div",K,[o("h1",null,b(x.value)+" ("+b(i.value.length)+")",1)]),o("div",Q,[o("div",T,[s[2]||(s[2]=o("h1",{class:"text-xl"},"Filtrar Por",-1)),(l(!0),p(k,null,E(w.value,n=>(l(),p("div",{class:"w-60 py-0.3",key:n.id},[o("details",X,[o("summary",Y,[o("span",Z,b(n.name),1),s[1]||(s[1]=o("span",{class:"transition group-open:-rotate-180"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})])],-1))]),o("div",ee,[o("ul",se,[o("ul",te,[(l(!0),p(k,null,E(g.value.filter(v=>v.filter.id===n.id),(v,P)=>(l(),p("li",{key:P},[o("div",oe,[o("label",{for:"Filter"+P},[o("input",{type:"checkbox",id:"Filter"+P,class:"size-5 rounded border-gray-300",onChange:de=>R(v)},null,40,ae)],8,re),o("span",ne,b(v.name),1)])]))),128))])])])])]))),128))]),o("div",null,[o("div",ie,[(l(!0),p(k,null,E(J.value,n=>(l(),O(D,{key:n.id,producto:n,images:M(n.id),brand:S(n.id),totalimages:u.value,class:"m-2"},null,8,["producto","images","brand","totalimages"]))),128))]),o("div",le,[c(d,null,{default:f(()=>[c(W,{justify:"center"},{default:f(()=>[c($,{cols:"8"},{default:f(()=>[c(d,{class:"max-width"},{default:f(()=>[c(t,{modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=n=>_.value=n),length:Math.ceil(i.value.length/(F()*2))},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1})])])])])}}},ue={class:"mt-16"},je={__name:"Index",props:{categories:Array},setup(B){return(r,g)=>(l(),O(z,{title:"Web",class:"bg-fondoback",categories:r.$page.props.categories},{default:f(()=>[c(q,{categories:r.$page.props.categories,images:r.$page.props.images},null,8,["categories","images"]),o("div",ue,[c(ce,{subgroup:r.$page.props.subgroup,products:r.$page.props.products,images:r.$page.props.images,brands:r.$page.props.brands},null,8,["subgroup","products","images","brands"])]),c(G,{categories:r.$page.props.categories,images:r.$page.props.images},null,8,["categories","images"])]),_:1},8,["categories"]))}};export{je as default};
