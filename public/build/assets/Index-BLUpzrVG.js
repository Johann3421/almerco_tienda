import{_ as D}from"./AppWebLayout-gtSRl0gO.js";import L from"./CartProductsMain-fiZ8HE6p.js";import{m as a,h as U,p as q,r as h,f as c,o as i,b as r,t as b,F as $,s as E,c as N,a as u,w as f}from"./app-Bt6ztAfV.js";import G from"./Cabecera-BZKB-Jw6.js";import H from"./NavMobil-CN-jJMiu.js";import"./Footer-DB5-MtFP.js";import"./References-07TxyabB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-Bism2vW4.js";import"./SettingStore-Dmkk0slu.js";import"./favicon-CdIV8-2k.js";import"./PapupCarrito-Bn9WbYt6.js";import"./CartMobil-DcDmtq4m.js";import"./PapupCant-B_d-Dv1P.js";import"./Promotion-BCU-_mBv.js";import"./Nav-BZ68Bjws.js";const K={class:"sm:mt-48 sm:ml-32 sm:mr-28"},Q={class:"block p-4 font-bold text-xl"},T={key:0},X={key:1},Y={class:"relative sm:flex flex-row p-2"},Z={class:"p-2 h-full"},ee={class:"rounded border border-gray-300 bg-white"},se={class:"flex cursor-pointer items-center justify-between gap-2 p-3 text-gray-900 transition"},te={class:"text-sm font-medium"},oe={class:"border-gray-200 bg-white"},re={class:"space-y-1 border-t border-gray-200 p-2"},ae={class:"space-y-1 border-gray-200 p-2"},ne={class:"inline-flex items-center gap-2"},ie=["for"],le=["id","onChange"],ce={class:"text-sm font-medium text-gray-700"},ue={class:"flex flex-wrap justify-center"},de={class:"text-center mt-4"},pe={__name:"Index",props:{subgroups:Object,products:Object,images:Object,brands:Array},setup(B){const o=B,g=a([]),y=a([]),w=a(""),O=a(""),j=a([]),m=a([]),d=a([]),I=a([]);d.value=o.images,I.value=o.images;const l=a([]),x=a([]),C=a([]),_=a(1),V=()=>{o.subgroups.forEach(e=>{l.value.push(...e.products)}),x.value=l.value},A=()=>{d.value&&d.value.length>0&&l.value.forEach(e=>{const s=d.value.filter(t=>t.product_id===e.id);j.value.push({product_id:e.id,imagenes:s})})},S=()=>{o.brands&&o.brands.length>0&&o.brands.forEach(e=>{e.filter_items.forEach(s=>{s.products.forEach(t=>{C.value.push({product_id:t.id,imagen:{file_path:s.file_path,file:s.file}})})})})},M=e=>{const s=C.value.find(t=>t.product_id===e);return s?s.imagen:null},R=async e=>{const s=m.value.findIndex(t=>t.id===e.id&&t.filter_id===e.filter.id);if(s===-1?m.value.push({id:e.id,filter_id:e.filter.id}):m.value.splice(s,1),m.value.length===0){l.value=x.value,d.value=I.value;return}try{const t=await axios.post("/filter-products",{filters:m.value,idtipo:o.subgroups[0].group.id,tipo:"group"}),p=t.data.products,k=t.data.images;JSON.stringify(x.value)!==JSON.stringify(p)&&(l.value=p,d.value=k,_.value=1)}catch(t){console.error("Error al enviar la solicitud al controlador:",t)}},J=e=>{const s=j.value.find(t=>t.product_id===e);return s?s.imagenes:[]},W=U(()=>{const s=F()*2,t=(_.value-1)*s,p=t+s;return l.value.slice(t,p)}),F=()=>{const e=window.innerWidth;return e>=7680?21:e>=3840?10:e>=2808?7:e>=2480?6:e>=2152?5:e>=1824?4:e>=1496?3:(e>=1168,2)};return q(()=>{V(),o.products.forEach(e=>{e.filter_items&&Array.isArray(e.filter_items)&&e.filter_items.forEach(s=>{g.value.some(t=>t.id===s.id)||g.value.push(s)})}),g.value.forEach(e=>{y.value.some(s=>s.id===e.filter.id)||y.value.push(e.filter)}),w.value=o.subgroups.length>0?o.subgroups[0].group.name:"",O.value=w.value,A(),S()}),(e,s)=>{const t=h("v-pagination"),p=h("v-container"),k=h("v-col"),z=h("v-row");return i(),c("section",K,[r("div",Q,[o.subgroups.length>0?(i(),c("h1",T,b(w.value)+" ("+b(l.value.length)+") ",1)):(i(),c("h1",X," No existen productos "))]),r("div",Y,[r("div",Z,[s[2]||(s[2]=r("h1",{class:"text-xl"},"Filtrar Por",-1)),(i(!0),c($,null,E(y.value,n=>(i(),c("div",{class:"w-60 py-0.3",key:n.id},[r("details",ee,[r("summary",se,[r("span",te,b(n.name),1),s[1]||(s[1]=r("span",{class:"transition group-open:-rotate-180"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})])],-1))]),r("div",oe,[r("ul",re,[r("ul",ae,[(i(!0),c($,null,E(g.value.filter(v=>v.filter.id===n.id),(v,P)=>(i(),c("li",{key:P},[r("div",ne,[r("label",{for:"Filter"+P},[r("input",{type:"checkbox",id:"Filter"+P,class:"size-5 rounded border-gray-300",onChange:me=>R(v)},null,40,le)],8,ie),r("span",ce,b(v.name),1)])]))),128))])])])])]))),128))]),r("div",null,[r("div",ue,[(i(!0),c($,null,E(W.value,n=>(i(),N(L,{key:n.id,producto:n,images:J(n.id),brand:M(n.id),totalimages:d.value},null,8,["producto","images","brand","totalimages"]))),128))]),r("div",de,[u(p,null,{default:f(()=>[u(z,{justify:"center"},{default:f(()=>[u(k,{cols:"8"},{default:f(()=>[u(p,{class:"max-width"},{default:f(()=>[u(t,{modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=n=>_.value=n),length:Math.ceil(l.value.length/(F()*2))},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1})])])])])}}},ge={class:"mt-16"},Fe={__name:"Index",props:{categories:Array},setup(B){return(o,g)=>(i(),N(D,{title:"Web",class:"bg-fondoback",categories:o.$page.props.categories},{default:f(()=>[u(G,{categories:o.$page.props.categories,images:o.$page.props.images},null,8,["categories","images"]),r("div",ge,[u(pe,{subgroups:o.$page.props.subgroups,products:o.$page.props.products,images:o.$page.props.images,brands:o.$page.props.brands},null,8,["subgroups","products","images","brands"])]),u(H,{categories:o.$page.props.categories,images:o.$page.props.images},null,8,["categories","images"])]),_:1},8,["categories"]))}};export{Fe as default};
