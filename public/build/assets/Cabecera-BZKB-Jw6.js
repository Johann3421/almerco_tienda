import{m as d,p as re,r as J,f as n,o as l,g as m,b as e,u as r,a as c,c as E,w as p,j as h,J as ue,F as _,s as w,t as i,e as u,n as C}from"./app-Bt6ztAfV.js";import K from"./Promotion-BCU-_mBv.js";import de from"./Nav-BZ68Bjws.js";import ce from"./PapupCarrito-Bn9WbYt6.js";import{L as fe}from"./logo-Bism2vW4.js";import{u as pe}from"./SettingStore-Dmkk0slu.js";import"./CartMobil-DcDmtq4m.js";import"./PapupCant-B_d-Dv1P.js";const ve={key:0,class:"hidden md:block"},ge={key:1,class:"block md:hidden"},me={class:"hidden lg:flex flex-col bg-white 2xl:px-24"},he={class:"hidden lg:flex p-5 sm:items-center"},be={class:"flex justify-between items-center w-full gap-10"},xe=["src"],_e={class:"w-100 hidden lg:flex items-center relative rounded-full"},we=["src"],ye={class:"flex flex-col text-sm text-gray-800"},ke={class:"font-bold"},Se={class:"px-4 hidden lg:flex items-center"},Ce={class:"flex items-center"},Ve={class:"flex flex-row items-center"},Ie={class:"absolute text-black -top-3 right-0 bg-white rounded-full px-2"},$e={class:"text-black pt-4"},Ee={class:"mr-2"},Me={class:"text-black text-center text-xs font-bold bg-green-500 px-1 py-1 rounded-lg"},Pe={class:"w-20"},Le={class:"relative hidden lg:flex items-center w-screen bg-navegation gap-1 2xl:px-24"},Be=["open"],je={class:"shrink-0 group-open:-rotate-180"},De={xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},Fe={class:"absolute bg-white w-auto top-16"},Ne={class:"bg-white"},Oe=["onMouseover","onMouseout"],Te=["open"],ze=["onClick"],Ge={class:"flex flex-wrap absolute bg-white top-0 left-56 w-lvw border-l border-sky-300 font-bold"},Re=["open"],Ae=["onClick"],Ue={class:"w-full h-full overflow-y-auto"},Je={key:0,class:"relative pl-5 h-16 w-full"},Ke={class:"flex items-center overflow-hidden w-full h-full"},qe=["open","onMouseover","onMouseout"],He={class:"flex items-center justify-center 2xl:py-5 transition-all duration-300 w-full"},Ye={class:"absolute w-full top-16 left-0 right-0 bg-white"},Qe={class:"flex flex-wrap"},We=["open"],Xe=["onClick"],Ze={class:"bg-white"},rt={__name:"Cabecera",props:{categories:Array,images:Object},setup(O){const b=d([]),V=d([]),M=d([]),I=d(""),T=d([]),q=O,x=pe(),H=async()=>{b.value=q.categories},Y=async()=>{b.value.forEach(t=>{V.value.push(...t.groups)})},Q=async()=>{V.value.forEach(t=>{M.value.push(...t.subgroups)})},W=t=>{b.value.forEach(s=>{s.dropdownVisibleSubnav=s.id===t})},X=()=>{b.value.forEach(t=>{t.dropdownVisibleSubnav=!1})};let z=0;window.addEventListener("scroll",()=>{let t=window.pageYOffset||document.documentElement.scrollTop,s=document.getElementById("promoDiv"),f=document.getElementById("fixedContent");s&&f&&(t>z?(s.classList.add("hidden"),f.style.top="0"):t===0&&(s.classList.remove("hidden"),f.style.top=s.clientHeight+"px")),z=t<=0?0:t});const y=d(!1),G=d(!1),$=d(!1),P=d(!1),k=d([]),R=d([]),L=d([]),Z=(t,s,f)=>{const g=`/storage/${s}/${f}`;L.value.find(S=>S.id===t)||L.value.push({id:t,route:g})},ee=t=>{const s=L.value.find(f=>f.id===t);return s?s.route:""},B=()=>{G.value=!G.value},te=()=>{$.value=!$.value},se=()=>{$.value=!1,U()},oe=async()=>{try{const t=await axios.get(`/filter-products-search?search=${I.value}`);k.value=t.data.products,R.value=t.data.images,le(k.value,R.value);for(let s=0;s<k.value.length;s++)ne(k.value[s].id);P.value=k.value.length>0}catch(t){console.error("Error al buscar productos:",t)}},le=(t,s)=>{t&&t.length>0&&t.forEach(f=>{const g=s.filter(o=>o.product_id===f.id);T.value.push({product_id:f.id,imagenes:g})})},ne=t=>{const s=T.value.find(f=>f.product_id===t);s&&s.imagenes.length>0&&Z(t,s.imagenes[0].file_path,s.imagenes[0].file)},A=d([]),j=d(0),D=d(0),U=async()=>{A.value=JSON.parse(localStorage.getItem("producto"))||[],j.value=0,D.value=0,A.value.forEach(t=>{j.value+=t.quantity,D.value+=t.subtotalsoles})},ae=async()=>{const t=route("search-products",{s:I.value.toUpperCase()});window.location.href=t},ie=()=>{P.value=!1};return re(async()=>{await H(),await Y(),await Q(),await U()}),(t,s)=>{const f=J("v-text-field"),g=J("v-icon");return l(),n("div",null,[r(x).getImagsupvalue?(l(),n("div",ve,[c(K,{settingsbanner:r(x).getImagsupvalue},null,8,["settingsbanner"])])):m("",!0),r(x).getImagsupmobilevalue?(l(),n("div",ge,[c(K,{settingsbanner:r(x).getImagsupmobilevalue},null,8,["settingsbanner"])])):m("",!0),e("div",{class:C(["fixed z-10",{"top-12":r(x).getImagsupvalue,"top-0":!r(x).getImagsupvalue}]),id:"fixedContent"},[e("div",me,[e("div",he,[e("div",be,[c(r(h),{class:"flex cursor-pointer w-72 h-20 px-5",href:t.route("web")},{default:p(()=>[e("img",{class:"rounded-md w-full h-full",src:r(fe),alt:"Logo"},null,8,xe)]),_:1},8,["href"]),e("div",_e,[c(f,{modelValue:I.value,"onUpdate:modelValue":s[0]||(s[0]=o=>I.value=o),onInput:oe,onKeyup:ue(ae,["enter"]),label:"Buscar ProductoS","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",density:"comfortable",class:"bg-transparent text-black"},null,8,["modelValue"]),P.value?(l(),n("div",{key:0,class:"absolute z-10 w-auto bg-white rounded-md shadow-lg mt-1 top-full overflow-y-scroll",onMouseleave:ie},[e("ul",null,[(l(!0),n(_,null,w(k.value,o=>(l(),E(r(h),{href:t.route("productid",{slug:o.slug}),key:o.id,class:"flex items-center gap-1 px-4 py-2 cursor-pointer hover:bg-gray-100"},{default:p(()=>[e("img",{src:ee(o.id),alt:"Img",class:"h-12 w-12 rounded object-cover"},null,8,we),e("p",ye,[e("span",null,i(o.name),1),e("span",ke,"Stock: "+i(o.stock),1)])]),_:2},1032,["href"]))),128))])],32)):m("",!0)])]),e("div",Se,[e("div",Ce,[e("div",Ve,[e("button",{onClick:te,class:"relative"},[s[3]||(s[3]=e("i",{class:"mdi mdi-cart text-4xl text-black p-2 rounded-xl m-2"},null,-1)),e("span",Ie,i(j.value),1)]),e("span",$e,[s[4]||(s[4]=e("span",{class:"mx-1"},"S/.",-1)),u(i(D.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])])])]),e("div",Ee,[c(de)]),e("div",Me,[e("p",Pe,[s[5]||(s[5]=u("T. Cambio ")),s[6]||(s[6]=e("br",null,null,-1)),u("S/. "+i(r(x).getDolarValue),1)])])]),$.value?(l(),E(ce,{key:0,onClose:se,images:O.images},null,8,["images"])):m("",!0)]),e("div",Le,[e("details",{open:y.value,class:"relative w-1/6 h-16 xl:px-4",onMouseover:s[1]||(s[1]=o=>y.value=!0),onMouseout:s[2]||(s[2]=o=>y.value=!1)},[e("summary",{class:C([{"bg-gradient-blue text-white":y.value,"hover:bg-gradient-blue":!y.value},"flex items-center justify-between px-4 text-white cursor-pointer 2xl:w-48 h-full"])},[s[7]||(s[7]=e("span",{class:"text-xs font-bold flex items-center"},[e("i",{class:"mdi mdi-menu text-lg mx-2"}),u("CATEGORIAS")],-1)),e("span",je,[(l(),n("svg",De,[e("path",{"fill-rule":"evenodd",class:C({"text-white":y.value}),d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,2)]))])],2),e("div",Fe,[e("ul",Ne,[(l(!0),n(_,null,w(b.value,(o,S)=>(l(),n("li",{key:S,onMouseover:a=>o.dropdownVisibleSub=!0,onMouseout:a=>o.dropdownVisibleSub=!1},[e("details",{open:o.dropdownVisibleSub,class:"group hover:bg-gradient-blue hover:text-white relative"},[e("summary",{onClick:a=>B(),class:C([{"bg-sky-500":o.dropdownVisibleSub,"hover:bg-sky-500":!o.dropdownVisibleSub},"flex p-2 rounded cursor-pointer text-xs border-b w-52"])},[e("span",{class:C([{"rotate-360":o.dropdownVisibleSub},"flex shrink-0 transition duration-100 justify-between w-full"])},[c(r(h),{href:t.route("categoryid",{slug:o.slug}),class:"block px-4 py-1 font-bold text-gray-800"},{default:p(()=>[c(g,null,{default:p(()=>[u(i(o.icon),1)]),_:2},1024),u(" "+i(o.name),1)]),_:2},1032,["href"])],2)],10,ze),e("div",Ge,[(l(!0),n(_,null,w(V.value,(a,F)=>(l(),n("div",{key:F,class:"flex"},[a.category_id===o.id?(l(),n("div",{key:0,open:a.dropdownVisibleSub,class:"flex border-b"},[e("div",{onClick:v=>B(),class:"p-3 cursor-pointer text-xs"},[c(r(h),{href:t.route("groupid",{slug:a.slug}),class:"py-2 font-bold text-sky-500"},{default:p(()=>[c(g,null,{default:p(()=>[u(i(a.icon),1)]),_:2},1024),u(" "+i(a.name),1)]),_:2},1032,["href"]),e("ul",Ue,[(l(!0),n(_,null,w(M.value,(v,N)=>(l(),n("li",{key:N,class:""},[v.group_id===a.id?(l(),E(r(h),{key:0,href:t.route("subgroupid",{slug:v.slug}),class:"block py-2 text-xs hover:bg-sky-100 focus:ring focus:ring-sky-200 transition-all duration-300"},{default:p(()=>[c(g,null,{default:p(()=>[u(i(v.icon),1)]),_:2},1024),u(" "+i(v.name),1)]),_:2},1032,["href"])):m("",!0)]))),128))])],8,Ae)],8,Re)):m("",!0)]))),128))])],8,Te)],40,Oe))),128))])])],40,Be),b.value.length>0?(l(),n("div",Je,[e("div",Ke,[(l(!0),n(_,null,w(b.value,(o,S)=>(l(),n("div",{key:S,id:"grupoid",class:"flex items-center overflow-hidden w-full"},[e("details",{open:o.dropdownVisibleSubnav,onMouseover:a=>W(o.id),onMouseout:a=>X(o.id),class:"flex rounded hover:bg-gradient-blue text-xs font-medium text-center transition-all duration-300 w-full"},[e("summary",He,[c(r(h),{class:"text-white px-2 2xl:px-4 flex items-center h-16 w-full",href:t.route("categoryid",{slug:o.slug})},{default:p(()=>[c(g,{class:"pr-0.5"},{default:p(()=>[u(i(o.icon),1)]),_:2},1024),u(" "+i(o.name),1)]),_:2},1032,["href"])]),e("div",Ye,[e("ul",Qe,[(l(!0),n(_,null,w(V.value,(a,F)=>(l(),n("li",{key:F},[a.category_id===o.id?(l(),n("div",{key:0,open:a.dropdownVisibleSubnav,class:"group text-sky-500 text-center"},[e("div",{onClick:v=>B(),class:"p-1 cursor-pointer transition-all duration-200 text-xs font-bold"},[c(r(h),{href:t.route("groupid",{slug:a.slug}),class:"block px-2 py-2"},{default:p(()=>[c(g,null,{default:p(()=>[u(i(a.icon),1)]),_:2},1024),u(" "+i(a.name),1)]),_:2},1032,["href"])],8,Xe),e("ul",Ze,[(l(!0),n(_,null,w(M.value,(v,N)=>(l(),n("li",{key:N},[v.group_id===a.id?(l(),E(r(h),{key:0,href:t.route("subgroupid",{slug:v.slug}),class:"block px-2 py-2 text-xs hover:bg-sky-100 hover:text-sky-500 focus:ring focus:ring-sky-200 transition-all duration-300"},{default:p(()=>[c(g,null,{default:p(()=>[u(i(v.icon),1)]),_:2},1024),u(" "+i(v.name),1)]),_:2},1032,["href"])):m("",!0)]))),128))])],8,We)):m("",!0)]))),128))])])],40,qe)]))),128))])])):m("",!0)])],2)])}}};export{rt as default};
