import{m as o,h as U,p as G,N as Q,f as w,b as e,g as p,a as T,w as V,u as $,d as u,t as n,c as B,n as H,o as i,j as J}from"./app-Tg2vsIGN.js";import K from"./PapupCarrito-DMOXKlem.js";import{u as R}from"./SettingStore-mPXLUNV3.js";import"./CartMobil-BH0CJ7l_.js";import"./PapupCant-ubNNp9Kj.js";const X={class:"h-8 w-full"},Y=["src"],Z=["src"],_={class:"relative flex justify-between items-star border-gray-100 bg-white h-48 py-1"},tt={class:"px-2 text-sm text-gray-900 text-center font-bold h-10"},et={class:"flex flex-col px-5"},ot={class:"text-sm text-left"},st={class:"text-sm text-left"},at={class:"text-sm text-left"},lt={class:"p-1 text-sm text-gray-700 flex flex-col"},nt={class:"absolute bottom-12 flex flex-row justify-center items-center w-full"},rt={class:"w-full text-xl font-bold text-rojo text-center"},ut={key:0,class:"flex flex-row items-center"},it={class:"text-orange-500 text-xl"},ct={class:"absolute w-full flex bottom-0 left-0 p-1"},dt={class:"text-xl font-bold"},xt={__name:"CartProductsMain",props:{producto:Object,images:Object,brand:Object,totalimages:Object},setup(s){const l=s,W=R(),y=o(0),r=o(1),z=o(1),f=o(0),v=o(0),c=o(0),k=o(""),S=o(""),C=o(0),N=o([]),F=o(!1),g=o(""),j=o(""),O=o(""),P=o("");f.value=l.producto.id,N.value=l.producto.filter_items,C.value=l.producto.valoration,S.value=l.producto.specification,k.value=l.producto.name,c.value=l.producto.stock,v.value=l.producto.price,j.value=l.producto.sku,O.value=l.producto.part_number,P.value=l.producto.description;const x=o(window.innerWidth),b=()=>{x.value=window.innerWidth},h=U(()=>(y.value=(l.producto.price*parseFloat(W.getDolarValue)).toFixed(2),y.value)),E=o([]),I=o(0),q=o(0),d=o(!1),D=()=>{E.value=JSON.parse(localStorage.getItem("producto"))||[],I.value=0,q.value=0,E.value.forEach(a=>{I.value+=a.quantity,q.value+=a.subtotalsoles})},A=()=>{d.value=!1,D()};G(()=>{z.value=l.producto.stock;const a=JSON.parse(localStorage.getItem("producto"))||[];F.value=a.some(t=>t.id===l.producto.id),window.addEventListener("resize",b),b(),g.value=l.images&&l.images.length>0?`/storage/${l.images[0].file_path}/${l.images[0].file}`:"",D()}),Q(()=>{window.removeEventListener("resize",b)});const L=()=>{d.value=!d.value},M=()=>{if(c.value===0){alert("Este producto no tiene stock disponible.");return}L();const a=JSON.parse(localStorage.getItem("producto"))||[],t=a.findIndex(m=>m.id===f.value);if(t!==-1){if(a[t].quantity+r.value>c.value){alert("No puedes agregar más de lo disponible en stock.");return}a[t].quantity+=r.value,a[t].subtotal=a[t].price*a[t].quantity,localStorage.setItem("producto",JSON.stringify(a));return}else a.push({id:f.value,name:k.value,pricedolar:v.value,pricesoles:h.value,quantity:r.value,subtotaldolar:v.value*r.value,subtotalsoles:h.value*r.value,specification:S.value,valoration:C.value,filter_items:N.value,stock:c.value,sku:j.value,part_number:O.value,description:P.value,routeimage:g.value}),localStorage.setItem("producto",JSON.stringify(a))};return(a,t)=>(i(),w("div",{class:H(["group relative overflow-hidden m-1 border border-gray-300 border-opacity-1 border-0.5 px-4 py-2 bg-white w-full",{"sm:w-80":x.value<=7680,"w-80":x.value>7680}])},[e("div",X,[s.brand?(i(),w("img",{key:0,class:"h-full",src:`/storage/${s.brand.file_path}/${s.brand.file}`,alt:"Marca"},null,8,Y)):p("",!0)]),T($(J),{href:a.route("productid",{slug:s.producto.slug})},{default:V(()=>[e("img",{src:g.value,alt:"Imagen de Producto",class:"w-full h-64 sm:w-80 object-cover rounded"},null,8,Z)]),_:1},8,["href"]),e("div",_,[e("div",{class:"flex flex-col w-full gap-2",onClick:t[0]||(t[0]=(...m)=>a.closeCantP&&a.closeCantP(...m))},[e("h3",tt,[u(n(s.producto.name.length>50?s.producto.name.slice(0,50).charAt(0)+s.producto.name.slice(0,50).slice(1):s.producto.name.charAt(0)+s.producto.name.slice(1))+" ",1),s.producto.name.length>50?(i(),B($(J),{key:0,href:a.route("productid",{slug:s.producto.slug}),class:"text-blue font-medium"},{default:V(()=>t[1]||(t[1]=[u("...Ver ")])),_:1},8,["href"])):p("",!0)]),e("div",et,[e("span",ot,[t[2]||(t[2]=e("span",{class:"font-medium"},"Número de parte:",-1)),u(" "+n(s.producto.part_number),1)]),e("span",st,[t[3]||(t[3]=e("span",{class:"font-medium"},null,-1)),u(" "+n(s.producto.sku),1)]),e("span",at,[t[4]||(t[4]=e("span",{class:"font-medium"},"Stock:",-1)),u(" "+n(s.producto.stock),1)])]),e("div",lt,[e("div",nt,[e("span",rt,"$ "+n(s.producto.price),1),s.producto.discount>0?(i(),w("p",ut,[t[5]||(t[5]=e("span",null,"Descuento:",-1)),e("span",it,n(s.producto.discount)+"%",1)])):p("",!0)]),e("div",ct,[e("button",{onClick:M,class:"relative w-full rounded-lg bg-encabezado p-2 text-white text-lg font-bold transition hover:scale-105 flex items-center justify-center"},[e("span",dt,"S/. "+n(h.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),t[6]||(t[6]=e("span",{class:"absolute right-1 rounded-full bg-white px-1"},[e("i",{class:"mdi mdi-plus text-2xl"})],-1))])])])])]),d.value?(i(),B(K,{key:0,onClose:A,images:s.totalimages},null,8,["images"])):p("",!0)],2))}};export{xt as default};
