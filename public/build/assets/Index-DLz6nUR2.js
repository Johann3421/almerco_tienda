import{_ as D}from"./AppWebLayout-gtSRl0gO.js";import L from"./CartProductsMain-fiZ8HE6p.js";import{m as a,h as U,p as q,r as y,f as l,o as i,b as o,t as w,F as E,s as B,c as F,a as c,w as m}from"./app-Bt6ztAfV.js";import G from"./Cabecera-BZKB-Jw6.js";import H from"./NavMobil-CN-jJMiu.js";import"./Footer-DB5-MtFP.js";import"./References-07TxyabB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-Bism2vW4.js";import"./SettingStore-Dmkk0slu.js";import"./favicon-CdIV8-2k.js";import"./PapupCarrito-Bn9WbYt6.js";import"./CartMobil-DcDmtq4m.js";import"./PapupCant-B_d-Dv1P.js";import"./Promotion-BCU-_mBv.js";import"./Nav-BZ68Bjws.js";const K={class:"sm:mt-48 sm:ml-32 sm:mr-28"},Q={class:"block p-4 font-bold text-xl"},T={key:0},X={key:1},Y={class:"relative flex md:flex-row flex-col p-2"},Z={class:"p-2 h-full"},ee={class:"rounded border border-gray-300 bg-white"},se={class:"flex cursor-pointer items-center justify-between gap-2 p-3 text-gray-900 transition"},te={class:"text-sm font-medium"},oe={class:"border-gray-200 bg-white"},re={class:"space-y-1 border-t border-gray-200 p-2"},ae={class:"space-y-1 border-gray-200 p-2"},ne={class:"flex items-center gap-2"},ie=["for"],le=["id","onChange"],ce={class:"text-sm font-medium text-gray-700"},ue={class:"flex flex-wrap justify-center"},de={class:"text-center mt-4"},pe={__name:"Index",props:{subgroups:Array,products:Object,images:Array,brands:Array},setup(I){const t=I,p=a([]),x=a([]),k=a(""),M=a(""),g=a([]),f=a([]),j=a([]);f.value=t.images,j.value=t.images;const u=a([]),P=a([]),_=a(new Map),v=a(new Map),h=a(1),N=()=>{t.subgroups.forEach(e=>{u.value.push(...e.products)}),P.value=u.value},V=()=>{Array.isArray(t.images)&&t.images.length>0&&t.images.forEach(e=>{_.value.has(e.product_id)||_.value.set(e.product_id,[]),_.value.get(e.product_id).push(e)})},S=()=>{Array.isArray(t.brands)&&t.brands.length>0&&t.brands.forEach(e=>{e.filter_items.forEach(s=>{s.products.forEach(r=>{v.value.has(r.id)||v.value.set(r.id,[]),v.value.get(r.id).push({file_path:s.file_path,file:s.file})})})})},O=e=>{const s=v.value.get(e);return s&&s.length>0?s[0]:null},R=e=>{const s=_.value.get(e);return s||[]},J=async e=>{const s=g.value.findIndex(r=>r.id===e.id&&r.filter_id===e.filter.id);if(s===-1?g.value.push({id:e.id,filter_id:e.filter.id}):g.value.splice(s,1),g.value.length===0){u.value=P.value,f.value=j.value;return}try{const r=await axios.post("/filter-products",{filters:g.value,idtipo:t.subgroups[0].category_id,tipo:"category"}),d=r.data.products,$=r.data.images;JSON.stringify(P.value)!==JSON.stringify(d)&&(u.value=d,f.value=$,h.value=1)}catch(r){console.error("Error al enviar la solicitud al controlador:",r)}},W=U(()=>{const s=C()*2,r=(h.value-1)*s,d=r+s;return u.value.slice(r,d)}),C=()=>{const e=window.innerWidth;return e>=7680?21:e>=3840?10:e>=2808?7:e>=2480?6:e>=2152?5:e>=1824?4:e>=1496?3:e>=1168?2:1};return q(()=>{N(),t.products.forEach(e=>{e.filter_items&&Array.isArray(e.filter_items)&&e.filter_items.forEach(s=>{p.value.some(r=>r.id===s.id)||p.value.push(s)})}),p.value.forEach(e=>{x.value.some(s=>s.id===e.filter.id)||x.value.push(e.filter)}),k.value=t.subgroups.length>0?t.subgroups[0].group.category.name:"",M.value=k.value,V(),S()}),(e,s)=>{const r=y("v-pagination"),d=y("v-container"),$=y("v-col"),z=y("v-row");return i(),l("section",K,[o("div",Q,[t.subgroups.length>0?(i(),l("h1",T,w(k.value)+" ("+w(u.value.length)+") ",1)):(i(),l("h1",X," No existen productos "))]),o("div",Y,[o("div",Z,[s[2]||(s[2]=o("h1",{class:"text-xl"},"Filtrar Por",-1)),(i(!0),l(E,null,B(x.value,n=>(i(),l("div",{class:"w-60 py-0.3",key:n.id},[o("details",ee,[o("summary",se,[o("span",te,w(n.name),1),s[1]||(s[1]=o("span",{class:"transition group-open:-rotate-180"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})])],-1))]),o("div",oe,[o("ul",re,[o("ul",ae,[(i(!0),l(E,null,B(p.value.filter(b=>b.filter.id===n.id),(b,A)=>(i(),l("li",{key:A},[o("div",ne,[o("label",{for:"Filter"+A},[o("input",{type:"checkbox",id:"Filter"+A,class:"size-5 rounded border-gray-300",onChange:me=>J(b)},null,40,le)],8,ie),o("span",ce,w(b.name),1)])]))),128))])])])])]))),128))]),o("div",null,[o("div",ue,[(i(!0),l(E,null,B(W.value,n=>(i(),F(L,{key:n.id,producto:n,images:R(n.id),brand:O(n.id),totalimages:f.value},null,8,["producto","images","brand","totalimages"]))),128))]),o("div",de,[c(d,null,{default:m(()=>[c(z,{justify:"center"},{default:m(()=>[c($,{cols:"8"},{default:m(()=>[c(d,{class:"max-width"},{default:m(()=>[c(r,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=n=>h.value=n),length:Math.ceil(u.value.length/(C()*2))},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1})])])])])}}},ge={class:"mt-16"},Ce={__name:"Index",props:{categories:Array},setup(I){return(t,p)=>(i(),F(D,{title:"Web",class:"bg-fondoback",categories:t.$page.props.categories},{default:m(()=>[c(G,{categories:t.$page.props.categories,images:t.$page.props.images},null,8,["categories","images"]),o("div",ge,[c(pe,{subgroups:t.$page.props.subgroups,products:t.$page.props.products,images:t.$page.props.images,brands:t.$page.props.brands},null,8,["subgroups","products","images","brands"])]),c(H,{categories:t.$page.props.categories,images:t.$page.props.images},null,8,["categories","images"])]),_:1},8,["categories"]))}};export{Ce as default};
