import{m as c,z as ie,r as i,o as I,f as H,a as l,w as a,d as s,t as h,y as U,p as Ve,u as r,F as re,b as n,Z as Ce,e as de,s as me,c as z}from"./app-Tg2vsIGN.js";import{_ as ke}from"./AuthenticatedLayout-ByaiLawU.js";import{F as we}from"./favicon-y_XG_-ev.js";import{_ as Pe}from"./Notification-lgF43WH4.js";import{_ as qe}from"./SimpleHeader-3wKLLGQt.js";import{r as he}from"./UseFormRules-C77ecxYy.js";import{u as pe}from"./OrderStore-CBK5lrTc.js";import{d as Ue}from"./index-zPKH93FC.js";import{_ as De}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CompanyLogo-CxfACTdu.js";const Ee={class:"flex justify-between items-center"},ce={__name:"OrderItemRow",props:{products:{type:Array,required:!0},product_id:{type:Number,required:!0},index:{type:Number,required:!0},amount:{type:Number,required:!0},unit_price:{type:Number,required:!0},unit_stock:{type:Number,required:!0},unit_name:{type:String,required:!0},total:{type:Number,required:!0}},setup(B){const _=B,V=pe(),f=c();_.product_id!==0&&(f.value=_.product_id);const D=c(_.amount),E=c(_.unit_price),N=c();_.unit_stock!==0&&(N.value=_.unit_stock);const w=c(_.total),J=c([g=>g?!0:"El campo es requerido"]),O=c([g=>/^\d+(\.\d{1,2})?$/.test(g)?!0:"Debe ser un valor decimal"]);ie(f,(g,y)=>{const x=_.products.find(A=>A.id===g);V.setOrderItem_product_id(_.index,x.id),x&&(E.value=Number(x.price),N.value=Number(x.stock),D.value=N.value,V.setOrderItem_unit_stock(_.index,N.value),V.setOrderItem_unit_price(_.index,E.value),V.setOrderItem_unit_name(_.index,x.name),w.value=Number(D.value*E.value),V.setOrderItem_amount(_.index,Number(D.value)),V.setOrderItem_total(_.index,w.value))}),ie([D,E],([g,y],[x,A])=>{N.value!==0&&g>N.value&&(D.value=N.value),w.value=Number(g*y),V.setOrderItem_amount(_.index,Number(g)),V.setOrderItem_unit_price(_.index,Number(y)),V.setOrderItem_total(_.index,w.value)});const P=()=>{V.removeItem(Number(_.index))};return(g,y)=>{const x=i("v-col"),A=i("v-list-item"),Q=i("v-list-item-title"),o=i("v-autocomplete"),d=i("v-text-field"),S=i("v-icon"),$=i("v-btn"),R=i("v-row"),G=i("v-container");return I(),H("div",Ee,[l(G,null,{default:a(()=>[l(R,{class:"justify-center align-center"},{default:a(()=>[l(x,{cols:"12",sm:"1"},{default:a(()=>[s(" # "+h(B.index+1),1)]),_:1}),l(x,{cols:"12",sm:"4"},{default:a(()=>[l(o,{label:"Producto (*)","item-title":"name","item-value":"id",density:"compact",color:"primary",variant:"outlined","hide-details":"",items:B.products,modelValue:f.value,"onUpdate:modelValue":y[0]||(y[0]=k=>f.value=k),rules:J.value},{item:a(({props:k,item:L})=>[l(A,U(k,{title:L.raw.name}),null,16,["title"])]),"no-data":a(()=>[l(A,null,{default:a(()=>[l(Q,null,{default:a(()=>y[4]||(y[4]=[s(" No hay filtros disponibles ")])),_:1})]),_:1})]),_:1},8,["items","modelValue","rules"])]),_:1}),l(x,{cols:"12",sm:"2"},{default:a(()=>[l(d,{label:"Precio por unidad",color:"primary",variant:"outlined",maxlength:"10",modelValue:E.value,"onUpdate:modelValue":y[1]||(y[1]=k=>E.value=k),counter:"","hide-details":"",rules:O.value,density:"compact",type:"number"},null,8,["modelValue","rules"])]),_:1}),l(x,{cols:"12",sm:"2"},{default:a(()=>[l(d,{label:"Cantidad",color:"primary",variant:"outlined",maxlength:"10",modelValue:D.value,"onUpdate:modelValue":y[2]||(y[2]=k=>D.value=k),counter:"","hide-details":"",rules:O.value,density:"compact",type:"number"},null,8,["modelValue","rules"])]),_:1}),l(x,{cols:"12",sm:"2"},{default:a(()=>[l(d,{label:"Total",color:"primary",variant:"outlined",maxlength:"10",modelValue:w.value,"onUpdate:modelValue":y[3]||(y[3]=k=>w.value=k),counter:"","hide-details":"",rules:O.value,disabled:"",density:"compact",type:"number"},null,8,["modelValue","rules"])]),_:1}),l(x,{cols:"12",sm:"1",class:"text-center"},{default:a(()=>[l($,{color:"error",onClick:P,"hide-details":"",density:"compact"},{default:a(()=>[l(S,null,{default:a(()=>y[5]||(y[5]=[s("mdi-delete")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}},Ne=["href"],Ie={class:"flex gap-4"},Oe={class:"flex gap-4"},je={class:"flex gap-4"},Ae={class:"flex-2"},Fe={class:"flex-1"},Se={class:"flex gap-4"},$e={class:"flex gap-4 w-100 justify-between align-center mb-6"},Re={class:"grid grid-cols-1 divide-y"},Te={class:"flex gap-4"},ze={class:"flex gap-4"},Be={class:"flex gap-4"},Ge={class:"flex-2"},Le={class:"flex-1"},Me={class:"flex gap-4"},Je={class:"flex gap-4 w-100 justify-between align-center mb-6"},Qe={class:"grid grid-cols-1 divide-y"},Ze={class:"py-6 h-full"},He={class:"max-w-8xl mx-auto sm:px-4 lg:px-6"},Ke={class:"overflow-hidden sm:rounded-sm lg:rounded-lg grid place-items-center"},We={class:"bg-gris-300 w-full grid place-items-center"},Xe={class:"max-w-screen-2xl w-full px-4 py-4 sm:px-6 sm:py-4 lg:px-12 lg:py-12 bg-white-200 rounded-lg"},Ye={class:"mt-4"},et=["colspan"],tt={class:"truncated-cell"},lt={__name:"Index",props:{products:{type:Array,required:!0}},setup(B){const _=B,V=c(1),f=pe(),D=c([]),E=c(!1),N=c(0),w=c(""),J=c(""),O=c(2),P=c(!1),g=async({page:p,itemsPerPage:e,sortBy:v})=>{E.value=!0;try{const u=await axios.get(route("orders.load",{page:p,itemsPerPage:e,sortBy:v,sortDesc:"asc",search:w.value}));V.value=u.data.orders.current_page,D.value=u.data.orders.data,N.value=u.data.orders.total}catch(u){console.error(u)}finally{E.value=!1}},x=Ue(()=>{J.value=w.value},250),A=c([]),Q=c([]);Ve(async()=>{A.value=[{title:"# Pedido",key:"index",align:"center"},{title:"Código",key:"order_code",align:"center"},{title:"Cliente",key:"customer_name"},{title:"Fecha",key:"created_at",align:"center"},{title:"Total",key:"order_total",align:"center"},{title:"Estado",key:"order_status",align:"center"},{title:"Acciones",key:"actions",align:"center"}],Q.value=[{title:"# Item",key:"index",sortable:!1,align:"center"},{title:"Producto",key:"get_product.name",sortable:!0},{title:"Cantidad",key:"amount",sortable:!1,align:"center"},{title:"Precio Unitario",key:"unit_price",sortable:!1,align:"center"},{title:"Total",key:"total_price",sortable:!1,align:"center"}]});const o=c({id:"",customer_name:"",customer_email:"",customer_phone:"",customer_address:"",customer_document_number:"",customer_document_type:1,order_status:"",order_status_update:"Cancelado",order_code:"",order_total:0,observation:"",delivery_date:"",active:!0}),d=he,S=c(!1),$=c(!1),R=c(!1),G=c(null),k=c(null),L=c(null),ve=async()=>{const{valid:p}=await G.value.validate();if(p)try{if(f.order.items.length===0){F(!0,"Debe agregar al menos un producto al pedido","#F9D7DA",3e3);return}if(o.value.order_status==="Completado"&&o.value.delivery_date===""){F(!0,"Debe ingresar la fecha de entrega","#F9D7DA",3e3);return}P.value=!0,o.value.order_status!=="Completado"&&delete o.value.delivery_date,o.value.observation===""&&delete o.value.observation;const e=f.order.items.filter(q=>q.product_id!==0),v=e.reduce((q,T)=>q+T.total,0);o.value.order_total=v;const u={...o.value,items:e},b=await axios.post(route("orders.store"),u);b.status===201&&(F(!0,b.data.message,"#D4E7C5",2e3),S.value=!1,f.clearOrderItems(),await G.value.reset(),await g({page:1,itemsPerPage:O.value}))}catch(e){W(e,e.response.data.message)}finally{P.value=!1}},_e=async()=>{try{if(f.order.items.length===0){F(!0,"Debe agregar al menos un producto al pedido","#F9D7DA",3e3);return}if(o.value.order_status==="Completado"&&o.value.delivery_date===""){F(!0,"Debe ingresar la fecha de entrega","#F9D7DA",3e3);return}P.value=!0,o.value.order_status!=="Completado"&&delete o.value.delivery_date;const p=f.order.items.filter(b=>b.product_id!==0),e=p.reduce((b,q)=>b+q.total,0);o.value.order_total=e;const v={...o.value,items:p},u=await axios.patch(route("orders.updateOrder",{code:o.value.order_code}),v);u.status===200&&(F(!0,u.data.message,"#D4E7C5",2e3),$.value=!1,f.clearOrderItems(),k.value.reset(),await g({page:V.value,itemsPerPage:O.value}))}catch(p){W(p,p.response.data.message)}finally{P.value=!1}},fe=async()=>{const{valid:p}=await L.value.validate();if(p)try{P.value=!0;const e=await axios.patch(route("orders.updateStatus",{code:o.value.order_code}),{order_status:o.value.order_status_update});e.status===200&&(F(!0,e.data.message,"#D4E7C5",2e3),R.value=!1,L.value.reset(),await g({page:V.value,itemsPerPage:O.value}))}catch(e){W(e,e.response.data.message)}finally{P.value=!1}},K=(p,e)=>{if(f.clearOrderItems(),p==="create_order")o.value={id:0,customer_name:"",customer_email:"",customer_phone:"",customer_address:"",customer_document_number:"",customer_document_type:1,order_status:"Pendiente de Pago",order_total:0,observation:"",delivery_date:"",active:!0,items:[]},S.value=!0;else if(p==="update_order"){$.value=!0,o.value=e,o.value.customer_document_type=Number(e.customer_document_type);const v=e.get_products.map(u=>({id:u.id,uuid:crypto.randomUUID(),product_id:u.product_id,amount:u.amount,unit_price:Number(u.unit_price),unit_stock:Number(u.get_product.stock)+Number(u.amount),unit_name:u.get_product.name,total:Number(u.total_price)}));f.addItems(v)}else p==="delete_order"&&(R.value=!0,o.value.id=e.id,o.value.customer_name=e.customer_name,o.value.order_code=e.order_code,o.value.order_status_update="Cancelado")},ye=p=>new Date(p).toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric"}),C=c({status:!1,message:"",color:"#D4E7C5",timeout:1e3,vertical:!0,location:"right top",rounded:"md"}),F=(p,e,v,u)=>{C.value.status=p,C.value.message=e,C.value.color=v,C.value.timeout=u},W=(p,e)=>{console.error(p),F(!0,e,"#F9D7DA",3e3)};return(p,e)=>{const v=i("v-text-field"),u=i("v-chip"),b=i("v-list-item"),q=i("v-list-item-title"),T=i("v-autocomplete"),ue=i("v-textarea"),ne=i("v-checkbox"),M=i("v-icon"),j=i("v-btn"),X=i("v-card-text"),Y=i("v-divider"),ee=i("v-card-actions"),te=i("v-form"),Z=i("v-card"),le=i("v-dialog"),ae=i("v-col"),se=i("v-row"),be=i("v-progress-linear"),ge=i("v-data-table"),xe=i("v-data-table-server");return I(),H(re,null,[l(r(Ce),{title:"Pedidos"},{default:a(()=>[n("link",{rel:"icon",href:r(we),type:"image/png",sizes:"16x16"},null,8,Ne),e[31]||(e[31]=n("meta",{name:"viewport",content:"width=device-width, initial-scale=1"},null,-1))]),_:1}),l(Pe,{modelValue:C.value.status,"onUpdate:modelValue":e[0]||(e[0]=t=>C.value.status=t),message:C.value.message,color:C.value.color,timeout:C.value.timeout,vertical:C.value.vertical,location:C.value.location,rounded:C.value.rounded,style:{margin:"6.5rem 2rem 0 0"}},{default:a(()=>[s(h(C.value.message),1)]),_:1},8,["modelValue","message","color","timeout","vertical","location","rounded"]),l(le,{modelValue:S.value,"onUpdate:modelValue":e[12]||(e[12]=t=>S.value=t),width:"1000",persistent:""},{default:a(()=>[l(Z,{"max-width":"1000",title:"Guardar Pedido","prepend-icon":"mdi-shopping"},{default:a(()=>[l(te,{onSubmit:de(ve,["prevent"]),ref_key:"form_create_order",ref:G,"fast-fail":""},{default:a(()=>[l(X,{class:"px-8 py-8"},{default:a(()=>[n("div",Ie,[l(v,{density:"comfortable",modelValue:o.value.customer_name,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.customer_name=t),label:"Nombre del Cliente (*)",color:"primary",variant:"outlined",required:"",hint:"Ejemplo: Jhon Doe",rules:[r(d).required]},null,8,["modelValue","rules"]),l(v,{density:"comfortable",modelValue:o.value.customer_email,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.customer_email=t),label:"Correo Electrónico (*)",color:"primary",variant:"outlined",required:"",hint:"Ejemplo: jhondoe@gmail.com",rules:[r(d).required,r(d).email]},null,8,["modelValue","rules"])]),n("div",Oe,[l(v,{density:"comfortable",modelValue:o.value.customer_phone,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.customer_phone=t),label:"Teléfono (*)",color:"primary",variant:"outlined",required:"",hint:"Ejemplo: 1234567890",rules:[r(d).required,r(d).phone]},null,8,["modelValue","rules"]),l(v,{density:"comfortable",modelValue:o.value.customer_address,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.customer_address=t),label:"Dirección (*)",color:"primary",variant:"outlined",required:"",hint:"Ejemplo: Calle 123",rules:[r(d).required,r(d).address]},null,8,["modelValue","rules"])]),n("div",je,[n("div",Ae,[l(T,{dense:"",modelValue:o.value.customer_document_type,"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.customer_document_type=t),label:"Tipo de Documento (*)","item-title":"name","item-value":"value",chips:"",density:"comfortable",color:"primary",variant:"outlined",required:"",rules:[r(d).required],items:[{name:"DNI",value:1},{name:"RUC",value:2}]},{chip:a(({props:t,item:m})=>[l(u,U(t,{text:m.raw.name,color:"primary"}),null,16,["text"])]),item:a(({props:t,item:m})=>[l(b,U(t,{title:m.raw.name}),null,16,["title"])]),"no-data":a(()=>[l(b,null,{default:a(()=>[l(q,null,{default:a(()=>e[32]||(e[32]=[s(" No hay filtros disponibles ")])),_:1})]),_:1})]),_:1},8,["modelValue","rules"])]),n("div",Fe,[l(v,{density:"comfortable",modelValue:o.value.customer_document_number,"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.customer_document_number=t),label:o.value.customer_document_type===1?"Dni (*)":"Ruc (*)",type:"text",rules:o.value.customer_document_type===1?[r(d).required,r(d).dni]:[r(d).required,r(d).ruc],color:"primary",variant:"outlined",required:"",hint:"Ejemplo: 00099900",maxlength:o.value.customer_document_type===1?8:11},null,8,["modelValue","label","rules","maxlength"])])]),n("div",Se,[l(T,{dense:"",modelValue:o.value.order_status,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.order_status=t),label:"Estado del Pedido (*)","item-title":"name","item-value":"value",chips:"",density:"comfortable",color:"primary",variant:"outlined",required:"",rules:[r(d).required],items:[{name:"Pendiente de Pago",value:"Pendiente de Pago"},{name:"Pendiente de Entrega",value:"Pendiente de Entrega"},{name:"Completado",value:"Completado"}]},{chip:a(({props:t,item:m})=>[l(u,U(t,{text:m.raw.name,color:"primary"}),null,16,["text"])]),item:a(({props:t,item:m})=>[l(b,U(t,{title:m.raw.name}),null,16,["title"])]),"no-data":a(()=>[l(b,null,{default:a(()=>[l(q,null,{default:a(()=>e[33]||(e[33]=[s(" No hay filtros disponibles ")])),_:1})]),_:1})]),_:1},8,["modelValue","rules"]),l(v,{density:"comfortable",modelValue:o.value.delivery_date,"onUpdate:modelValue":e[8]||(e[8]=t=>o.value.delivery_date=t),label:o.value.order_status==="Completado"?"Fecha de Entrega (*)":"Fecha de Entrega",type:"date",disabled:o.value.order_status!=="Completado",rules:o.value.order_status==="Completado"?[r(d).required]:[],"model-value":o.value.order_status==="Completado"?o.value.delivery_date:"",color:"primary",variant:"outlined",required:"",hint:"Ejemplo: 2021-10-10"},null,8,["modelValue","label","disabled","rules","model-value"])]),l(ue,{modelValue:o.value.observation,"onUpdate:modelValue":e[9]||(e[9]=t=>o.value.observation=t),label:"Observación",color:"primary",variant:"outlined",hint:"Ejemplo: Falta el pago de manera presencial",rows:"3",clearable:"",density:"comfortable",counter:"",maxlength:"255","no-resize":""},null,8,["modelValue"]),l(ne,{label:"Activo",modelValue:o.value.active,"onUpdate:modelValue":e[10]||(e[10]=t=>o.value.active=t),color:"primary",rules:[r(d).boolean]},null,8,["modelValue","rules"]),n("div",$e,[e[35]||(e[35]=n("h2",{class:"text-xl font-weight-medium tracking-normal"}," Productos ",-1)),l(j,{color:"primary",density:"comfortable",onClick:r(f).addItem},{default:a(()=>[l(M,{left:""},{default:a(()=>e[34]||(e[34]=[s("mdi-plus")])),_:1})]),_:1},8,["onClick"])]),n("div",Re,[(I(!0),H(re,null,me(r(f).getOrder_items,(t,m)=>(I(),z(ce,{products:_.products,product_id:t.product_id,key:t.uuid,index:m,amount:t.amount,unit_price:t.unit_price,unit_stock:t.unit_stock,unit_name:t.unit_name,total:t.total},null,8,["products","product_id","index","amount","unit_price","unit_stock","unit_name","total"]))),128))]),e[36]||(e[36]=n("small",{class:"text-caption text-medium-emphasis mt-6 block"}," (*) Campos requeridos ",-1))]),_:1}),l(ee,null,{default:a(()=>[l(Y),l(j,{onClick:e[11]||(e[11]=t=>S.value=!1)},{default:a(()=>e[37]||(e[37]=[s(" Cancelar ")])),_:1}),l(j,{type:"submit",color:"primary",loading:P.value},{default:a(()=>e[38]||(e[38]=[s(" Guardar ")])),_:1},8,["loading"])]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),l(le,{modelValue:$.value,"onUpdate:modelValue":e[24]||(e[24]=t=>$.value=t),width:"1000",persistent:""},{default:a(()=>[l(Z,{"max-width":"1000",title:"Actualizar Pedido: "+o.value.order_code,"prepend-icon":"mdi-shopping"},{default:a(()=>[l(te,{onSubmit:de(_e,["prevent"]),ref_key:"form_update_order",ref:k,"fast-fail":""},{default:a(()=>[l(X,{class:"px-8 py-8"},{default:a(()=>[n("div",Te,[l(v,{density:"comfortable",modelValue:o.value.customer_name,"onUpdate:modelValue":e[13]||(e[13]=t=>o.value.customer_name=t),label:"Nombre del Cliente (*)",color:"primary",variant:"outlined",hint:"Ejemplo: Jhon Doe",rules:[r(d).required]},null,8,["modelValue","rules"]),l(v,{density:"comfortable",modelValue:o.value.customer_email,"onUpdate:modelValue":e[14]||(e[14]=t=>o.value.customer_email=t),label:"Correo Electrónico (*)",color:"primary",variant:"outlined",hint:"Ejemplo: jhondoe@gmail.com",rules:[r(d).required,r(d).email]},null,8,["modelValue","rules"])]),n("div",ze,[l(v,{density:"comfortable",modelValue:o.value.customer_phone,"onUpdate:modelValue":e[15]||(e[15]=t=>o.value.customer_phone=t),label:"Teléfono (*)",color:"primary",variant:"outlined",hint:"Ejemplo: 1234567890",rules:[r(d).required,r(d).phone]},null,8,["modelValue","rules"]),l(v,{density:"comfortable",modelValue:o.value.customer_address,"onUpdate:modelValue":e[16]||(e[16]=t=>o.value.customer_address=t),label:"Dirección (*)",color:"primary",variant:"outlined",hint:"Ejemplo: Calle 123",rules:[r(d).required,r(d).address]},null,8,["modelValue","rules"])]),n("div",Be,[n("div",Ge,[l(T,{dense:"",modelValue:o.value.customer_document_type,"onUpdate:modelValue":e[17]||(e[17]=t=>o.value.customer_document_type=t),label:"Tipo de Documento (*)","item-title":"name","item-value":"value",chips:"",density:"comfortable",color:"primary",variant:"outlined",rules:[r(d).required],items:[{name:"DNI",value:1},{name:"RUC",value:2}]},{chip:a(({props:t,item:m})=>[l(u,U(t,{text:m.raw.name,color:"primary"}),null,16,["text"])]),item:a(({props:t,item:m})=>[l(b,U(t,{title:m.raw.name}),null,16,["title"])]),"no-data":a(()=>[l(b,null,{default:a(()=>[l(q,null,{default:a(()=>e[39]||(e[39]=[s(" No hay filtros disponibles ")])),_:1})]),_:1})]),_:1},8,["modelValue","rules"])]),n("div",Le,[l(v,{density:"comfortable",modelValue:o.value.customer_document_number,"onUpdate:modelValue":e[18]||(e[18]=t=>o.value.customer_document_number=t),label:o.value.customer_document_type===1?"Dni (*)":"Ruc (*)",type:"text",rules:o.value.customer_document_type===1?[r(d).required,r(d).dni]:[r(d).required,r(d).ruc],color:"primary",variant:"outlined",required:"",hint:"Ejemplo: 00099900",maxlength:o.value.customer_document_type===1?8:11},null,8,["modelValue","label","rules","maxlength"])])]),n("div",Me,[l(T,{dense:"",modelValue:o.value.order_status,"onUpdate:modelValue":e[19]||(e[19]=t=>o.value.order_status=t),label:"Estado del Pedido (*)","item-title":"name","item-value":"value",chips:"",density:"comfortable",color:"primary",variant:"outlined",rules:[r(d).required],items:[{name:"Pendiente de Pago",value:"Pendiente de Pago"},{name:"Pendiente de Entrega",value:"Pendiente de Entrega"},{name:"Completado",value:"Completado"}]},{chip:a(({props:t,item:m})=>[l(u,U(t,{text:m.raw.name,color:"primary"}),null,16,["text"])]),item:a(({props:t,item:m})=>[l(b,U(t,{title:m.raw.name}),null,16,["title"])]),"no-data":a(()=>[l(b,null,{default:a(()=>[l(q,null,{default:a(()=>e[40]||(e[40]=[s(" No hay filtros disponibles ")])),_:1})]),_:1})]),_:1},8,["modelValue","rules"]),l(v,{density:"comfortable",modelValue:o.value.delivery_date,"onUpdate:modelValue":e[20]||(e[20]=t=>o.value.delivery_date=t),label:o.value.order_status==="Completado"?"Fecha de Entrega (*)":"Fecha de Entrega",type:"date",disabled:o.value.order_status!=="Completado",rules:o.value.order_status==="Completado"?[r(d).required]:[],"model-value":o.value.order_status==="Completado"?o.value.delivery_date:"",color:"primary",variant:"outlined",required:"",hint:"Ejemplo: 2021-10-10"},null,8,["modelValue","label","disabled","rules","model-value"])]),l(ue,{modelValue:o.value.observation,"onUpdate:modelValue":e[21]||(e[21]=t=>o.value.observation=t),label:"Observación",color:"primary",variant:"outlined",hint:"Ejemplo: Falta el pago de manera presencial",rows:"3",clearable:"",density:"comfortable",counter:"",maxlength:"255","no-resize":""},null,8,["modelValue"]),l(ne,{label:"Activo",modelValue:o.value.active,"onUpdate:modelValue":e[22]||(e[22]=t=>o.value.active=t),color:"primary",rules:[r(d).boolean]},null,8,["modelValue","rules"]),n("div",Je,[e[42]||(e[42]=n("h2",{class:"text-xl font-weight-medium tracking-normal"}," Productos ",-1)),l(j,{color:"primary",density:"comfortable",onClick:r(f).addItem},{default:a(()=>[l(M,{left:""},{default:a(()=>e[41]||(e[41]=[s("mdi-plus")])),_:1})]),_:1},8,["onClick"])]),n("div",Qe,[(I(!0),H(re,null,me(r(f).getOrder_items,(t,m)=>(I(),z(ce,{products:_.products,product_id:t.product_id,key:t.uuid,index:m,amount:t.amount,unit_price:t.unit_price,unit_stock:t.unit_stock,unit_name:t.unit_name,total:t.total},null,8,["products","product_id","index","amount","unit_price","unit_stock","unit_name","total"]))),128))]),e[43]||(e[43]=n("small",{class:"text-caption text-medium-emphasis mt-6 block"}," (*) Campos requeridos ",-1))]),_:1}),l(ee,null,{default:a(()=>[l(Y),l(j,{onClick:e[23]||(e[23]=t=>$.value=!1)},{default:a(()=>e[44]||(e[44]=[s(" Cancelar ")])),_:1}),l(j,{color:"primary",loading:P.value,type:"submit"},{default:a(()=>e[45]||(e[45]=[s(" Actualizar ")])),_:1},8,["loading"])]),_:1})]),_:1},512)]),_:1},8,["title"])]),_:1},8,["modelValue"]),l(le,{modelValue:R.value,"onUpdate:modelValue":e[27]||(e[27]=t=>R.value=t),width:"500",persistent:""},{default:a(()=>[l(Z,{"max-width":"500",title:"Pedido: "+o.value.order_code,"prepend-icon":"mdi-delete"},{default:a(()=>[l(te,{onSubmit:de(fe,["prevent"]),ref_key:"form_delete_order",ref:L,"fast-fail":""},{default:a(()=>[l(X,{class:"px-8 py-8"},{default:a(()=>[l(se,null,{default:a(()=>[l(ae,{cols:"12"},{default:a(()=>[l(T,{dense:"",modelValue:o.value.order_status_update,"onUpdate:modelValue":e[25]||(e[25]=t=>o.value.order_status_update=t),label:"Acciones (*)","item-title":"name","item-value":"value",chips:"",density:"comfortable",color:"primary",variant:"outlined",required:"",rules:[r(d).required],items:[{name:"Cancelar",value:"Cancelado"},{name:"Reembolzar",value:"Reembolsado"}]},{chip:a(({props:t,item:m})=>[l(u,U(t,{text:m.raw.name,color:"primary"}),null,16,["text"])]),item:a(({props:t,item:m})=>[l(b,U(t,{title:m.raw.name}),null,16,["title"])]),"no-data":a(()=>[l(b,null,{default:a(()=>[l(q,null,{default:a(()=>e[46]||(e[46]=[s(" No hay filtros disponibles ")])),_:1})]),_:1})]),_:1},8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),l(ee,null,{default:a(()=>[l(Y),l(j,{onClick:e[26]||(e[26]=t=>R.value=!1)},{default:a(()=>e[47]||(e[47]=[s(" Cancelar ")])),_:1}),l(j,{color:"primary",loading:P.value,type:"submit"},{default:a(()=>e[48]||(e[48]=[s(" Guardar ")])),_:1},8,["loading"])]),_:1})]),_:1},512)]),_:1},8,["title"])]),_:1},8,["modelValue"]),l(ke,null,{default:a(()=>[n("div",Ze,[n("div",He,[n("div",Ke,[n("section",We,[n("div",Xe,[l(qe,{title:"Gestiona tus Pedidos",breadcrumb:"Pedidos",breadcrumb_link:p.route("orders.index")},null,8,["breadcrumb_link"]),n("article",Ye,[l(Z,{variant:"flat"},{title:a(()=>[l(se,{align:"center",justify:"space-between",density:"comfortable",class:"p-2"},{default:a(()=>[l(ae,{cols:"12",md:"6"},{default:a(()=>e[49]||(e[49]=[n("h2",{class:"text-lg md:text-xl lg:text-xl text-gray-900"},"Pedidos",-1)])),_:1}),l(ae,{cols:"12",md:"6",class:"text-right flex justify-end items-center"},{default:a(()=>[l(j,{color:"primary",onClick:e[28]||(e[28]=t=>K("create_order"))},{default:a(()=>[l(M,{left:""},{default:a(()=>e[50]||(e[50]=[s("mdi-plus")])),_:1}),e[51]||(e[51]=s(" Agregar Pedido "))]),_:1})]),_:1})]),_:1})]),text:a(()=>[l(v,{modelValue:w.value,"onUpdate:modelValue":e[29]||(e[29]=t=>w.value=t),label:"Buscar Pedido","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",density:"comfortable",color:"primary",onInput:r(x)},null,8,["modelValue","onInput"]),l(xe,{"items-per-page":O.value,"onUpdate:itemsPerPage":e[30]||(e[30]=t=>O.value=t),headers:A.value,items:D.value,"items-length":N.value,loading:E.value,search:J.value,"item-value":"id","onUpdate:options":g,"loading-text":"Cargando Pedidos","no-data-text":"Actualmente no hay pedidos disponibles","items-per-page-text":"Pedidos por página","show-expand":""},{loader:a(({isActive:t})=>[l(be,{active:t,color:"primary",height:"3",indeterminate:""},null,8,["active"])]),"item.index":a(({index:t})=>[s(h(t+1),1)]),"item.created_at":a(({item:t})=>[s(h(ye(t.created_at)),1)]),"item.total":a(({item:t})=>[l(u,{color:"green",label:""},{default:a(()=>[s(h(t.total),1)]),_:2},1024)]),"item.order_status":a(({item:t})=>[t.order_status==="Completado"?(I(),z(u,{key:0,color:"green",label:""},{default:a(()=>[s(h(t.order_status),1)]),_:2},1024)):t.order_status==="Cancelado"?(I(),z(u,{key:1,color:"red",label:""},{default:a(()=>[s(h(t.order_status),1)]),_:2},1024)):t.order_status==="Reembolsado"?(I(),z(u,{key:2,color:"black",label:""},{default:a(()=>[s(h(t.order_status),1)]),_:2},1024)):(I(),z(u,{key:3,color:"orange",label:""},{default:a(()=>[s(h(t.order_status),1)]),_:2},1024))]),"item.actions":a(({item:t})=>[l(M,{class:"cursor-pointer",color:"#0e7490",style:{"margin-right":".5rem"},onClick:m=>K("update_order",t),disabled:t.order_status==="Completado"||t.order_status==="Cancelado"||t.order_status==="Reembolsado"},{default:a(()=>e[52]||(e[52]=[s(" mdi-pencil ")])),_:2},1032,["onClick","disabled"]),l(M,{class:"cursor-pointer",color:"#0e7490",style:{"margin-left":".5rem"},onClick:m=>K("delete_order",t),disabled:t.order_status==="Completado"||t.order_status==="Cancelado"||t.order_status==="Reembolsado"},{default:a(()=>e[53]||(e[53]=[s(" mdi-delete ")])),_:2},1032,["onClick","disabled"])]),"expanded-row":a(({columns:t,item:m})=>[n("tr",null,[n("td",{colspan:t.length,style:{padding:"1rem 5rem 1rem 5rem"}},[l(ge,{headers:Q.value,items:m.get_products,"no-data-text":"Actualmente no hay items en el pedido","items-per-page":"5",style:{border:"2px solid #adadad","border-radius":".5rem"}},{"item.index":a(({index:oe})=>[s(h(oe+1),1)]),"item.get_product.name":a(({item:oe})=>[n("div",tt,h(oe.get_product.name),1)]),_:2},1032,["headers","items"])],8,et)])]),_:1},8,["items-per-page","headers","items","items-length","loading","search"])]),_:1})])])])])])])]),_:1})],64)}}},pt=De(lt,[["__scopeId","data-v-d5a69f85"]]);export{pt as default};
