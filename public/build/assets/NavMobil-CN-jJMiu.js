import{m as a,p as se,r as te,f as r,o as l,b as e,a as F,i as le,w as M,u as d,j as P,H as ne,g as p,J as ae,F as w,s as x,c as $,n as k,K as re,t as g,e as ie}from"./app-Bt6ztAfV.js";import{u as ue}from"./SettingStore-Dmkk0slu.js";import ce from"./PapupCarrito-Bn9WbYt6.js";import{L as de}from"./logo-Bism2vW4.js";import"./CartMobil-DcDmtq4m.js";import"./PapupCant-B_d-Dv1P.js";const fe={class:"relative flex justify-around bg-stone-700 p-1 items-center w-full text-white"},pe={key:1,class:"flex flex-row"},ge=["src"],ve={class:"w-full absolute right-0 top-0 bottom-0 flex items-center bg-white px-5 border-b border-black"},be=["src"],me={class:"flex flex-col text-sm"},he={class:"font-bold"},we={class:"flex flex-col items-center shrink-0 transition duration-300 z-10 bg-white"},xe={key:0,class:"w-full fixed bg-white"},ke={class:"w-full"},ye={class:"absolute w-full bg-white h-screen overflow-y-auto"},_e=["onMouseover","onMouseout"],Se=["open"],Ve=["onClick"],Ce={class:"block rounded-lg px-4 py-1 text-sm font-medium text-black"},Me={class:"w-full h-full border-l border-orange-200 bg-orange-100"},Pe=["onMouseover","onMouseout"],$e=["open"],Ie=["onClick"],je={class:"block px-4 py-1 text-sm font-medium text-black"},Ee={class:"bg-white w-full h-full overflow-y-auto"},Ke={__name:"NavMobil",props:{categories:Array,images:Object},setup(I){const y=a([]),_=a([]),j=a([]),v=a(""),E=a([]),K=I,S=ue(),O=async()=>{y.value=K.categories},R=async()=>{y.value.forEach(s=>{_.value.push(...s.groups)})},T=async()=>{_.value.forEach(s=>{j.value.push(...s.subgroups)})},b=a(!1),m=a(!1),f=a(!1),L=a(null),u=a([]),B=a([]),D=a(!1),V=a([]),N=s=>{s.dropdownVisibleSub=!s.dropdownVisibleSub},z=()=>{b.value=!b.value},U=()=>{m.value=!m.value},A=()=>{m.value=!1},G=()=>{f.value=!f.value,f.value&&re(()=>{L.value!==null&&L.value.focus()})},H=()=>{f.value=!1},J=async()=>{try{const s=await axios.get(`/filter-products-search?search=${v.value}`);u.value=s.data.products,B.value=s.data.images,q(u.value,B.value);for(let o=0;o<u.value.length;o++)Q(u.value[o].id);D.value=u.value.length>0}catch(s){console.error("Error al buscar productos:",s)}},Y=async()=>{const s=route("search-products",{s:v.value.toUpperCase()});window.location.href=s},q=(s,o)=>{s&&s.length>0&&s.forEach(i=>{const t=o.filter(h=>h.product_id===i.id);E.value.push({product_id:i.id,imagenes:t})})},Q=s=>{const o=E.value.find(i=>i.product_id===s);o&&o.imagenes.length>0&&W(s,o.imagenes[0].file_path,o.imagenes[0].file)},W=(s,o,i)=>{const t=`/storage/${o}/${i}`;V.value.find(n=>n.id===s)||V.value.push({id:s,route:t})},X=s=>{const o=V.value.find(i=>i.id===s);return o?o.route:""},C=a(0),Z=()=>{S.getImagsupvalue?C.value=window.scrollY:C.value=0};return se(async()=>{await O(),await R(),await T(),window.addEventListener("scroll",Z)}),(s,o)=>{const i=te("v-text-field");return l(),r("div",{class:k(["fixed flex flex-col lg:hidden w-full",{"top-0":C.value>0||!d(S).getImagsupvalue,"top-12":d(S).getImagsupvalue}])},[e("nav",fe,[b.value?(l(),r("div",{key:0,onClick:z},o[2]||(o[2]=[e("span",null,[e("i",{class:"mdi mdi-close text-4xl"})],-1)]))):(l(),r("div",pe,[e("span",{class:"block",onClick:z},o[3]||(o[3]=[e("i",{class:"mdi mdi-menu text-4xl"},null,-1)]))])),F(d(P),{class:"flex cursor-pointer w-full h-14 px-5 justify-center",href:s.route("web")},{default:M(()=>[e("img",{class:"rounded-md h-full",src:d(de),alt:"Logo"},null,8,ge)]),_:1},8,["href"]),le(e("div",ve,[F(i,{modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=t=>v.value=t),onInput:J,onKeyup:ae(Y,["enter"]),label:"Buscar Producto","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",density:"comfortable",class:"w-full h-12 bg-white rounded focus:outline-none focus:ring focus:border-orange-500"},null,8,["modelValue"]),D.value?(l(),r("div",{key:0,class:"absolute z-10 w-auto bg-white rounded-md shadow-lg top-full mt-2 overflow-y-auto",onMouseleave:o[1]||(o[1]=(...t)=>s.hidePopupOnMouseLeave&&s.hidePopupOnMouseLeave(...t))},[e("ul",null,[(l(!0),r(w,null,x(u.value,t=>(l(),$(d(P),{href:s.route("productid",{slug:t.slug}),key:t.id,class:"flex items-center gap-1 px-4 py-2 cursor-pointer hover:bg-fondoback"},{default:M(()=>[e("img",{src:X(t.id),alt:"Img",class:"h-12 w-12 rounded object-cover"},null,8,be),e("p",me,[e("span",null,g(t.name),1),e("span",he,"Stock: "+g(t.stock),1)])]),_:2},1032,["href"]))),128))])],32)):p("",!0),e("span",{class:"cursor-pointer",onClick:H},o[4]||(o[4]=[e("i",{class:"mdi mdi-close text-4xl"},null,-1)]))],512),[[ne,f.value]]),e("span",{onClick:G,class:"cursor-pointer"},o[5]||(o[5]=[e("i",{class:"mdi mdi-magnify text-4xl"},null,-1)]))]),e("div",we,[b.value?(l(),r("div",xe,[e("nav",{class:"flex justify-around items-center p-2 w-full border-b border-black"},[e("button",{onClick:U,class:"block text-center px-4"},o[6]||(o[6]=[e("i",{class:"mdi mdi-cart text-4xl"},null,-1),e("p",null,"Carrito",-1)]))]),o[7]||(o[7]=e("div",{class:"p-4 w-full border-b border-black bg-fondoback"},[e("h1",null,"CategorÃ­as")],-1)),e("div",ke,[e("ul",ye,[(l(!0),r(w,null,x(y.value,(t,h)=>(l(),r("li",{key:h,onMouseover:n=>t.dropdownVisibleSub=!0,onMouseout:n=>t.dropdownVisibleSub=!1},[e("details",{open:t.dropdownVisibleSub,class:"group hover:bg-orange-100 hover:text-white w-full bg-white"},[e("summary",{onClick:n=>N(t),class:k([{"bg-orange-300":t.dropdownVisibleSub,"hover:bg-orange-300":!t.dropdownVisibleSub},"flex p-2 rounded text-white cursor-pointer transition-all duration-300"])},[e("span",{class:k([{"rotate-360":t.dropdownVisibleSub},"flex shrink-0 transition duration-300 justify-between"])},[e("li",Ce,g(t.name),1)],2)],10,Ve),e("ul",Me,[(l(!0),r(w,null,x(_.value,(n,ee)=>(l(),r("li",{key:ee,onMouseover:c=>n.dropdownVisibleSub=!0,onMouseout:c=>n.dropdownVisibleSub=!1},[n.category_id===t.id?(l(),r("details",{key:0,open:n.dropdownVisibleSub,class:"group hover:bg-orange-100 hover:text-white"},[e("summary",{onClick:c=>N(n),class:k([{"bg-orange-200":n.dropdownVisibleSub,"hover:bg-orange-200":!n.dropdownVisibleSub},"flex p-2 text-white cursor-pointer transition-all duration-300"])},[e("li",je,g(n.name),1)],10,Ie),e("ul",Ee,[(l(!0),r(w,null,x(j.value,(c,oe)=>(l(),r("li",{key:oe,class:"text-center"},[c.group_id===n.id?(l(),$(d(P),{key:0,href:s.route("subgroupid",{slug:c.slug}),class:"block px-4 py-3 text-sm font-medium text-black hover:bg-orange-300 hover:text-white focus:ring focus:ring-orange-200 transition-all duration-300 border-b"},{default:M(()=>[ie(g(c.name),1)]),_:2},1032,["href"])):p("",!0)]))),128))])],8,$e)):p("",!0)],40,Pe))),128))])],8,Se)],40,_e))),128))])])])):p("",!0),m.value?(l(),$(ce,{key:1,onClose:A,images:I.images},null,8,["images"])):p("",!0)])],2)}}};export{Ke as default};
